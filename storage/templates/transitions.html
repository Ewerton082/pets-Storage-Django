{% extends 'starter.html' %}
{% load static %}

{% block title %}Registro de Transações{% endblock %}

{% block settings %} 
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}

        <div class="container-sm">
            <form class="row my-4 mx-auto" action="" method="get">
                <div class="flex col col-7 me-2">
                    <input type="text" name="filter" id="filter" placeholder="Nome do Vendedor" class="form-control rounded">
                    <input type="date" name="filter_date" class="form-control mt-2 rounded">
                </div>
                <input class="btn btn-primary col col-4 my-btn-sub" type="submit" value="Filtrar Dados">
            </form>
        </div>

        <div class="container-sm d-flex justify-content-around">
            <div class="bg-light rounded col-3">
                <p class="fs-4">Vendidas:</p>
                <p>{{total_sold}}</p>
            </div>

            <div class="bg-light rounded col-3">
                <p class="fs-4">Vendidas:</p>
                <p>{{total_sold}}</p>
            </div>

            <div class="bg-light rounded col-3">
                <p class="fs-4">Vendidas:</p>
                <p>{{total_sold}}</p>
            </div>
        </div>

        <table class="table table-sm text-center table-striped mx-auto mt-2 align-middle border-bottom border-dark border-1" id="table_foods">
            <thead class="table-dark">
                <tr>
                    <th>Vendedor</th>
                    <th>Produto</th>
                    <th class="text-center">Quantidade</th>
                    <th>Operação</th>
                    <th class="responsive-column">Data e Hora</th>
                </tr>
            </thead>
            <tbody>
                {% if data %}
                    {% for item in data %}
                        <tr>
                            <td class="fw-bold">{{item.user}}</td>
                            <td >{{item.food}}</td>
                            {% if item.moviment_type == "Venda"%}
                                <td class="text-danger fw-bold text-center">{{item.quantity}}</td>
                                <td class="text-danger fw-bold">{{item.moviment_type}}</td>
                            {% elif item.moviment_type == "Compra"%}
                                <td class="text-success fw-bold text-center">{{item.quantity}}</td>
                                <td class="text-success fw-bold">{{item.moviment_type}}</td>
                            {% endif %}
                            <td class="responsive-column">{{item.date}}</td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" class="h1 text-danger text-center">Não Encontramos Nenhuma Transação</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
{% endblock %}